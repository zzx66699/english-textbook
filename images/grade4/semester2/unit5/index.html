<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Unit 5 ç”µè„‘ä¸“ç”¨ç‰ˆ</title>
    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        :root { --pink: #ffdae0; --blue: #c0e8ff; --green: #d1f4e0; --yellow: #fff2cc; --text: #5d4037; --soft-white: #f5f5f5; --nav-bg: #ffffff; }
        body { font-family: "Comic Sans MS", "å¹¼åœ†", sans-serif; background: var(--soft-white); margin: 0; display: flex; flex-direction: column; align-items: center; color: var(--text); padding-bottom: 60px; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        /* é¡¶éƒ¨æ  */
        .top-bar { width: 96vw; max-width: 800px; background: var(--nav-bg); padding: 15px 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; align-items: center; border: 4px solid var(--green); border-top: none; border-radius: 0 0 20px 20px; position: sticky; top: 0; z-index: 200; box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        
        /* æŒ‰é’® */
        .nav-btn { background: var(--pink); border: 3px solid #fff; color: #d84315; padding: 8px 24px; border-radius: 25px; cursor: pointer; font-size: 16px; font-weight: 900; box-shadow: 0 4px 0 #ffab91; transition: all 0.1s; }
        .nav-btn:active { transform: translateY(4px); box-shadow: none; }
        .nav-btn:disabled { background: #eeeeee; box-shadow: none; color: #ccc; cursor: not-allowed; border-color:#eee;}
        
        /* é…ç½®é¡¹ */
        .config-item { display: flex; align-items: center; gap: 8px; font-size: 18px; font-weight: bold; }
        .icon-emoji { font-size: 28px; line-height: 1; }
        
        /* å£°éŸ³é€‰æ‹©æ¡† */
        select { border: 3px solid var(--blue); border-radius: 12px; padding: 8px 5px; font-size: 16px; font-weight: bold; color: #555; max-width: 140px; outline: none; background: #fff; }
        
        /* é¡µç  */
        .page-badge { background: var(--yellow); padding: 8px 20px; border-radius: 20px; color: #f9a825; font-weight: 900; font-size: 18px; border: 3px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        
        /* æ»‘å— */
        input[type=range] { transform: scale(1.2); margin: 0 5px; accent-color: var(--pink); cursor: pointer; }
        
        /* ä¹¦æœ¬å®¹å™¨ */
        .book-container { position: relative; width: 96vw; max-width: 800px; aspect-ratio: 780 / 1100; margin: 20px 0; background: #ffffff; border: 8px solid var(--green); border-radius: 20px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .page-img { width: 100%; height: 100%; position: absolute; top: 0; left: 0; object-fit: fill; }
        
        /* çƒ­ç‚¹åŒºåŸŸ */
        .hotspot { position: absolute; cursor: pointer; z-index: 10; border-radius: 8px; }
        .hotspot:active { background: rgba(255, 255, 0, 0.3); } 
        
        /* --- ç¿»è¯‘æ°”æ³¡ (ç¿»è¯‘ç½®é¡¶é€»è¾‘) --- */
        .trans-popup { 
            position: absolute; 
            background: rgba(255, 255, 255, 0.95); 
            border: 3px solid var(--pink); 
            border-radius: 15px; 
            padding: 10px 15px; 
            color: #d84315; 
            font-weight: bold; 
            font-size: 18px; 
            pointer-events: none; /* ç‚¹å‡»ç©¿é€ */
            z-index: 100; 
            transform: translateX(-50%); 
            display: none; 
            text-align: center; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
            min-width: 120px; 
            width: max-content;
            max-width: 90%;
            white-space: normal;
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <button class="nav-btn prevBtn" onclick="changePage(-1)">ä¸Šä¸€é¡µ</button>
        <div class="page-badge pageIndicator">1 / 6</div>
        <button class="nav-btn nextBtn" onclick="changePage(1)">ä¸‹ä¸€é¡µ</button>
        
        <div style="width: 1px; height: 30px; background: #eee; margin: 0 5px;"></div>
        
        <div class="config-item">
            <span style="font-size:20px;">è¯‘</span>
            <input type="checkbox" id="transToggle" checked style="width:22px;height:22px;accent-color:var(--green); cursor:pointer;">
        </div>
        <div class="config-item">
            <span class="icon-emoji">ğŸ¢</span>
            <input type="range" id="rate" min="0.5" max="1.5" step="0.1" value="0.9" style="width:80px;">
            <span class="icon-emoji">ğŸ°</span>
        </div>
        <div class="config-item">
            <select id="voiceSelect"></select>
        </div>
    </div>

    <div class="book-container" id="bookBox">
        <img id="bgImg" class="page-img" src="page1.png" alt="è¯¾æ–‡å›¾ç‰‡">
        <div id="transBubble" class="trans-popup"></div>
    </div>

    <div style="display:flex; align-items:center; gap:20px; margin-bottom: 30px;">
        <button class="nav-btn prevBtn" onclick="changePage(-1)">ä¸Šä¸€é¡µ</button>
        <div class="page-badge pageIndicator">1 / 6</div>
        <button class="nav-btn nextBtn" onclick="changePage(1)">ä¸‹ä¸€é¡µ</button>
    </div>

    <script>
        // --- Unit 5 æ•°æ® (Eating out) ---
        // å›¾ç‰‡å¼•ç”¨å·²è®¾ä¸º .png
        const unitData = [
            { 
                img: "page1.png", 
                hotspots: [ 
                    { en: "Unit 5 Eating out", zh: "ç¬¬äº”å•å…ƒ å¤–å‡ºå°±é¤", t: 4, l: 20, w: 45, h: 10 }, 
                    { en: "jiaozi", zh: "é¥ºå­", t: 65, l: 11, w: 10, h: 3 }, 
                    { en: "spring roll", zh: "æ˜¥å·", t: 67, l: 34, w: 12, h: 3 }, 
                    { en: "fried rice", zh: "ç‚’é¥­", t: 47, l: 75, w: 12, h: 3 }, 
                    { en: "noodles", zh: "é¢æ¡", t: 83, l: 14, w: 10, h: 3 }, 
                    { en: "tea", zh: "èŒ¶", t: 84, l: 45, w: 8, h: 3 }, 
                    { en: "orange juice", zh: "æ©™æ±", t: 88, l: 53, w: 15, h: 3 }, 
                    { en: "apple juice", zh: "è‹¹æœæ±", t: 89, l: 70, w: 15, h: 3 } 
                ] 
            },
            { 
                img: "page2.png", 
                hotspots: [ 
                    { en: "Big question. How do you order food properly?", zh: "æ ¸å¿ƒé—®é¢˜ï¼šä½ å¦‚ä½•æ­£ç¡®åœ°ç‚¹é¤ï¼Ÿ", t: 9, l: 62, w: 35, h: 10 }, 
                    { en: "Learning objectives", zh: "å­¦ä¹ ç›®æ ‡", t: 25, l: 65, w: 28, h: 8 }, 
                    { en: "To name some food from different countries", zh: "å‘½åä¸€äº›æ¥è‡ªä¸åŒå›½å®¶çš„é£Ÿç‰©", t: 33, l: 65, w: 30, h: 6 }, 
                    { en: "To order food in a restaurant", zh: "åœ¨é¤é¦†é‡Œç‚¹é¤", t: 40, l: 65, w: 30, h: 6 }, 
                    { en: "To make a menu", zh: "åˆ¶ä½œä¸€ä»½èœå•", t: 46, l: 65, w: 30, h: 5 }, 
                    { en: "What would you like?", zh: "ä½ æƒ³åƒä»€ä¹ˆï¼Ÿ", t: 75, l: 11, w: 40, h: 3 }, 
                    { en: "What would you like?", zh: "ä½ æƒ³åƒä»€ä¹ˆï¼Ÿ", t: 78, l: 11, w: 40, h: 3 }, 
                    { en: "I'd like some vegetables with rice.", zh: "æˆ‘æƒ³åƒè”¬èœé…ç±³é¥­ã€‚", t: 81, l: 11, w: 40, h: 3 }, 
                    { en: "I'd like some juice with ice.", zh: "æˆ‘æƒ³å–åŠ å†°çš„æœæ±ã€‚", t: 84, l: 11, w: 40, h: 3 }, 
                    { en: "All the food looks really great.", zh: "æ‰€æœ‰çš„é£Ÿç‰©çœ‹èµ·æ¥éƒ½å¾ˆæ£’ã€‚", t: 87, l: 11, w: 40, h: 3 }, 
                    { en: "I'll eat everything on my plate.", zh: "æˆ‘ä¼šæŠŠç›˜å­é‡Œçš„ä¸œè¥¿åƒå…‰ã€‚", t: 90, l: 11, w: 40, h: 3 }, 
                    { en: "1 Look at the picture. Where are the people? What can you see on the table?", zh: "çœ‹å›¾ã€‚äººä»¬åœ¨å“ªé‡Œï¼Ÿæ¡Œä¸Šæœ‰ä»€ä¹ˆï¼Ÿ", t: 65, l: 64, w: 30, h: 12 }, 
                    { en: "2 Listen to the rhyme and chant along.", zh: "å¬æ­Œè°£å¹¶è·Ÿç€åŸå”±ã€‚", t: 77, l: 64, w: 30, h: 6 }, 
                    { en: "3 Think about answers to the big question.", zh: "æ€è€ƒæ ¸å¿ƒé—®é¢˜çš„ç­”æ¡ˆã€‚", t: 84, l: 64, w: 30, h: 6 } 
                ] 
            },
            { 
                img: "page3.png", 
                hotspots: [ 
                    { en: "Cartoon time", zh: "æ¼«ç”»æ—¶é—´", t: 8, l: 10, w: 30, h: 5 }, 
                    { en: "A hot dog?", zh: "çƒ­ç‹—ï¼Ÿ", t: 14, l: 10, w: 30, h: 4 }, 
                    { en: "1 I'm hungry.", zh: "æˆ‘é¥¿äº†ã€‚", t: 20, l: 17, w: 20, h: 4 }, 
                    { en: "Me too.", zh: "æˆ‘ä¹Ÿæ˜¯ã€‚", t: 23, l: 35, w: 15, h: 4 }, 
                    { en: "2 Let's eat there.", zh: "æˆ‘ä»¬åœ¨é‚£å„¿åƒå§ã€‚", t: 24, l: 59, w: 25, h: 4 }, 
                    { en: "Great!", zh: "å¤ªæ£’äº†ï¼", t: 35, l: 82, w: 15, h: 4 }, 
                    { en: "3 Here's our menu. What would you like?", zh: "è¿™æ˜¯èœå•ã€‚ä½ ä»¬æƒ³åƒä»€ä¹ˆï¼Ÿ", t: 39, l: 16, w: 32, h: 8 }, 
                    { en: "I'd like some fish and chips, please.", zh: "è¯·ç»™æˆ‘é±¼å’Œè–¯æ¡ã€‚", t: 47, l: 30, w: 28, h: 8 }, 
                    { en: "A sandwich, please.", zh: "è¯·ç»™æˆ‘ä¸‰æ˜æ²»ã€‚", t: 62, l: 15, w: 25, h: 4 }, 
                    { en: "I'd like a hot dog, please.", zh: "è¯·ç»™æˆ‘ä¸€ä¸ªçƒ­ç‹—ã€‚", t: 67, l: 18, w: 35, h: 4 }, 
                    { en: "4 A hot dog?", zh: "çƒ­ç‹—ï¼Ÿ", t: 59, l: 66, w: 20, h: 4 }, 
                    { en: "5 Thank you!", zh: "è°¢è°¢ï¼", t: 77, l: 40, w: 20, h: 4 }, 
                    { en: "6 How's the hot dog?", zh: "çƒ­ç‹—æ€ä¹ˆæ ·ï¼Ÿ", t: 72, l: 75, w: 20, h: 4 }, 
                    { en: "It's delicious!", zh: "çœŸç¾å‘³ï¼", t: 89, l: 65, w: 20, h: 4 }, 
                    { en: "How do Bobby and his friends order food?", zh: "æ³¢æ¯”å’Œæœ‹å‹ä»¬æ˜¯å¦‚ä½•ç‚¹é¤çš„ï¼Ÿ", t: 93, l: 18, w: 60, h: 4 } 
                ] 
            },
            { 
                img: "page4.png", 
                hotspots: [ 
                    { en: "A Read and match", zh: "è¯»ä¸€è¯»ï¼Œè¿ä¸€è¿", t: 11, l: 10, w: 30, h: 4 }, 
                    { en: "B Act it out. Act out the story in groups.", zh: "æ¼”ä¸€æ¼”ã€‚å°ç»„åˆä½œè¡¨æ¼”æ•…äº‹ã€‚", t: 33, l: 10, w: 60, h: 5 }, 
                    { en: "C Think and say. How do you order food? Give an example.", zh: "æƒ³ä¸€æƒ³ï¼Œè¯´ä¸€è¯´ã€‚ä½ å¦‚ä½•ç‚¹é¤ï¼Ÿä¸¾ä¸ªä¾‹å­ã€‚", t: 44, l: 10, w: 80, h: 6 }, 
                    { en: "Sounds in focus", zh: "è¯­éŸ³ç„¦ç‚¹", t: 57, l: 20, w: 30, h: 5 }, 
                    { en: "1 Listen to the sentence from the story and read.", zh: "å¬æ•…äº‹é‡Œçš„å¥å­å¹¶æœ—è¯»ã€‚", t: 63, l: 10, w: 60, h: 3 }, 
                    { en: "Here's our menu.", zh: "è¿™æ˜¯æˆ‘ä»¬çš„èœå•ã€‚", t: 67, l: 14, w: 60, h: 3 }, 
                    { en: "2 Listen to the rhyme and chant along. Then find more words.", zh: "å¬æ­Œè°£å¹¶åŸå”±ã€‚ç„¶åæ‰¾å‡ºæ›´å¤šå•è¯ã€‚", t: 70, l: 10, w: 80, h: 3 }, 
                    { en: "The students are looking at the menu.", zh: "å­¦ç”Ÿä»¬æ­£åœ¨çœ‹èœå•ã€‚", t: 76, l: 14, w: 50, h: 3 }, 
                    { en: "The cakes are cute and sweet.", zh: "è›‹ç³•åˆå¯çˆ±åˆç”œã€‚", t: 79, l: 14, w: 50, h: 3 }, 
                    { en: "How many would they like to eat?", zh: "ä»–ä»¬æƒ³åƒå¤šå°‘ä¸ªï¼Ÿ", t: 83, l: 14, w: 50, h: 3 }, 
                    { en: "student", zh: "å­¦ç”Ÿ", t: 89, l: 20, w: 20, h: 3 } 
                ] 
            },
            { 
                img: "page5.png", 
                hotspots: [ 
                    { en: "Eating out in a Chinese restaurant", zh: "åœ¨ä¸­é¤é¦†å¤–ç”¨é¤", t: 8, l: 8, w: 60, h: 5 }, 
                    { en: "1 What would you like, boys?", zh: "å­©å­ä»¬ï¼Œä½ ä»¬æƒ³åƒä»€ä¹ˆï¼Ÿ", t: 16, l: 6, w: 30, h: 6 }, 
                    { en: "I'd like some jiaozi.", zh: "æˆ‘æƒ³åƒäº›é¥ºå­ã€‚", t: 21, l: 53, w: 25, h: 5 }, 
                    { en: "I'd like some noodles.", zh: "æˆ‘æƒ³åƒäº›é¢æ¡ã€‚", t: 27, l: 74, w: 22, h: 6 }, 
                    { en: "2 What would you like, Dad?", zh: "çˆ¸çˆ¸ï¼Œä½ æƒ³åƒä»€ä¹ˆï¼Ÿ", t: 59, l: 12, w: 30, h: 8 }, 
                    { en: "I'd like some fried rice and spring rolls.", zh: "æˆ‘æƒ³åƒäº›ç‚’é¥­å’Œæ˜¥å·ã€‚", t: 64, l: 70, w: 28, h: 10 }, 
                    { en: "I'd like some spring rolls too.", zh: "æˆ‘ä¹Ÿæƒ³åƒæ˜¥å·ã€‚", t: 86, l: 22, w: 28, h: 6 }, 
                    { en: "We can share them.", zh: "æˆ‘ä»¬å¯ä»¥ä¸€èµ·åˆ†äº«ã€‚", t: 90, l: 48, w: 30, h: 4 } 
                ] 
            },
            { 
                img: "page6.png", 
                hotspots: [ 
                    { en: "3 Can I help you?", zh: "æˆ‘æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨çš„å—ï¼Ÿ", t: 2, l: 21, w: 25, h: 5 }, 
                    { en: "Yes. We'd like noodles, jiaozi, fried rice and spring rolls, please.", zh: "æ˜¯çš„ã€‚è¯·ç»™æˆ‘ä»¬é¢æ¡ã€é¥ºå­ã€ç‚’é¥­å’Œæ˜¥å·ã€‚", t: 5, l: 55, w: 35, h: 10 }, 
                    { en: "OK. Anything else?", zh: "å¥½çš„ã€‚è¿˜è¦åˆ«çš„å—ï¼Ÿ", t: 23, l: 4, w: 22, h: 6 }, 
                    { en: "Two glasses of orange juice and a cup of tea, please.", zh: "è¯·ç»™æˆ‘ä¸¤æ¯æ©™æ±å’Œä¸€æ¯èŒ¶ã€‚", t: 26, l: 37, w: 43, h: 8 }, 
                    { en: "4 It's delicious! I love Chinese food!", zh: "çœŸç¾å‘³ï¼æˆ‘çˆ±ä¸­é¤ï¼", t: 37, l: 16, w: 45, h: 5 }, 
                    { en: "Let's try hot pot next time. It's Sichuan food.", zh: "ä¸‹æ¬¡æˆ‘ä»¬è¯•è¯•ç«é”…ã€‚å®ƒæ˜¯å››å·èœã€‚", t: 45, l: 60, w: 34, h: 8 }, 
                    { en: "5 Two takeaway boxes, please!", zh: "è¯·ç»™æˆ‘ä¸¤ä¸ªæ‰“åŒ…ç›’ï¼", t: 65, l: 10, w: 25, h: 6 }, 
                    { en: "OK!", zh: "å¥½çš„ï¼", t: 72, l: 71, w: 10, h: 4 }, 
                    { en: "How do the characters order food?", zh: "å›¾ä¸­çš„è§’è‰²æ˜¯å¦‚ä½•ç‚¹é¤çš„ï¼Ÿ", t: 92, l: 15, w: 50, h: 4 } 
                ] 
            }
        ];

        let pIdx = 0;
        const synth = window.speechSynthesis;

        window.onload = () => { 
            loadVoices(); 
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
            render(); 
        };

        function loadVoices() {
            const voices = synth.getVoices().filter(v => v.lang.includes('en'));
            const select = document.getElementById('voiceSelect');
            if(voices.length > 0) {
                select.innerHTML = voices.map((v, i) => `<option value="${i}">${v.name.substring(0,15)}</option>`).join('');
            } else {
                select.innerHTML = '<option>é»˜è®¤å£°éŸ³</option>';
            }
        }

        function render() {
            const data = unitData[pIdx];
            document.getElementById('bgImg').src = data.img;
            document.querySelectorAll('.pageIndicator').forEach(el => el.innerText = (pIdx + 1) + " / " + unitData.length);
            document.querySelectorAll('.prevBtn').forEach(btn => btn.disabled = (pIdx === 0));
            document.querySelectorAll('.nextBtn').forEach(btn => btn.disabled = (pIdx === unitData.length - 1));
            
            document.getElementById('transBubble').style.display = "none";
            document.querySelectorAll('.hotspot').forEach(h => h.remove());

            data.hotspots.forEach(item => {
                const div = document.createElement('div');
                div.className = 'hotspot';
                div.style.top = item.t + "%"; 
                div.style.left = item.l + "%"; 
                div.style.width = item.w + "%"; 
                div.style.height = item.h + "%";
                
                div.onclick = function() {
                    synth.cancel();
                    const cleanText = item.en.replace(/^(\d+[\.\s]*)+/g, "").trim();
                    const utter = new SpeechSynthesisUtterance(cleanText);
                    utter.rate = document.getElementById('rate').value;
                    const voices = synth.getVoices().filter(v => v.lang.includes('en'));
                    const selIdx = document.getElementById('voiceSelect').value;
                    if(voices[selIdx]) utter.voice = voices[selIdx];
                    synth.speak(utter);

                    if(document.getElementById('transToggle').checked) {
                        const b = document.getElementById('transBubble');
                        b.innerText = item.zh;
                        b.style.display = "block";
                        b.style.left = (item.l + item.w/2) + "%";
                        
                        // æ™ºèƒ½åˆ¤æ–­ï¼šå¦‚æœå¥å­ä½ç½®åœ¨é¡µé¢é¡¶éƒ¨ (<20%)ï¼Œæ°”æ³¡å°±å¾€ä¸‹å¼¹
                        if(item.t < 20) {
                            b.style.top = (item.t + item.h + 0.5) + "%";
                            b.style.bottom = "auto";
                        } else {
                            b.style.top = "auto";
                            b.style.bottom = (100 - item.t + 2) + "%"; 
                        }
                    }
                };
                document.getElementById('bookBox').appendChild(div);
            });
        }

        function changePage(step) { 
            pIdx = Math.max(0, Math.min(unitData.length - 1, pIdx + step)); 
            window.scrollTo({top:0, behavior:'smooth'}); 
            render(); 
        }
    </script>
</body>
</html>